"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3323],{14520:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>u,frontMatter:()=>t,metadata:()=>a,toc:()=>s});var r=o(74848),c=o(15680);const t={id:"build_file",title:"Build File"},l="Build File",a={id:"concepts/build_file",title:"Build File",description:"A build file is a file, typically named BUCK, that defines one or more",source:"@site/../docs/concepts/build_file.md",sourceDirName:"concepts",slug:"/concepts/build_file",permalink:"/docs/concepts/build_file",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"build_file",title:"Build File"},sidebar:"main",previous:{title:"Build Rule",permalink:"/docs/concepts/build_rule"},next:{title:"Build Target",permalink:"/docs/concepts/build_target"}},i={},s=[];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.useMDXComponents)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"build-file",children:"Build File"})}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.em,{children:"build file"})," is a file, typically named ",(0,r.jsx)(n.code,{children:"BUCK"}),", that defines one or more\n",(0,r.jsx)(n.a,{href:"/docs/concepts/build_rule",children:"build rule"}),"s. Note that you can change the name that Buck2 uses\nfor the build file in the ",(0,r.jsx)(n.code,{children:"buildfile"})," section of ",(0,r.jsx)(n.code,{children:".buckconfig"}),'. A source file in\nyour project can only be referenced by rules in its "nearest" build file, where\n"nearest" means its closest direct ancestor in your project\'s file tree. (If a\nsource file has a build file as a sibling, then that is its nearest ancestor.)\nFor example, if your project had the following ',(0,r.jsx)(n.code,{children:"BUCK"})," files:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"java/com/facebook/base/BUCK\njava/com/facebook/common/BUCK\njava/com/facebook/common/collect/BUCK\n"})}),"\n",(0,r.jsx)(n.p,{children:"Then your build rules would have the following constraints:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Rules in ",(0,r.jsx)(n.code,{children:"java/com/facebook/base/BUCK"})," can reference any file under\n",(0,r.jsx)(n.code,{children:"java/com/facebook/base/"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Rules in ",(0,r.jsx)(n.code,{children:"java/com/facebook/common/"})," can reference any files under that\ndirectory, except for those under ",(0,r.jsx)(n.code,{children:"java/com/facebook/common/collect/"}),', as\nthose "belong" to the ',(0,r.jsx)(n.code,{children:"BUCK"})," file in the ",(0,r.jsx)(n.code,{children:"collect"})," directory."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["The set of source files accessible to a build file is also known as its ",(0,r.jsx)(n.em,{children:"build\npackage"}),". The way to refer to code across build packages is to create build\nrules and use ",(0,r.jsx)(n.code,{children:"deps"})," to refer to that code. Going back to the previous example,\nsuppose code in ",(0,r.jsx)(n.code,{children:"java/com/facebook/common/concurrent/"})," wants to depend on code\nin ",(0,r.jsx)(n.code,{children:"java/com/facebook/common/collect/"}),". Presumably\n",(0,r.jsx)(n.code,{children:"java/com/facebook/common/collect/BUCK"})," has a build rule like:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"java_library(\n  name = 'collect',\n  srcs = glob(['*.java']),\n  deps = ['//java/com/facebook/base:base',],)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Then ",(0,r.jsx)(n.code,{children:"java/com/facebook/common/BUCK"})," could have a rule like:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"java_library(\n  name = 'concurrent',\n  srcs = glob(['concurrent/*.java']),\n  deps = ['//java/com/facebook/base:base','//java/com/facebook/common/collect:collect',],)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["whereas the following ",(0,r.jsx)(n.strong,{children:"would be invalid"})," because\n",(0,r.jsx)(n.code,{children:"java/com/facebook/common/collect/"})," has its own build file, so\n",(0,r.jsx)(n.code,{children:"//java/com/facebook/common/collect:concurrent"})," cannot list\n",(0,r.jsx)(n.code,{children:"java/com/facebook/common/collect/*.java"})," in its ",(0,r.jsx)(n.code,{children:"srcs"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"java_library(\n  name = 'concurrent',\n  srcs = glob(['collect/*.java', 'concurrent/*.java']),\n  deps = ['//java/com/facebook/base:base',],)\n"})})]})}function u(e={}){const{wrapper:n}={...(0,c.useMDXComponents)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},15680:(e,n,o)=>{o.r(n),o.d(n,{MDXContext:()=>s,MDXProvider:()=>f,mdx:()=>h,useMDXComponents:()=>u,withMDXComponents:()=>d});var r=o(96540);function c(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function t(){return t=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},t.apply(this,arguments)}function l(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,r)}return o}function a(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?l(Object(o),!0).forEach((function(n){c(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function i(e,n){if(null==e)return{};var o,r,c=function(e,n){if(null==e)return{};var o,r,c={},t=Object.keys(e);for(r=0;r<t.length;r++)o=t[r],n.indexOf(o)>=0||(c[o]=e[o]);return c}(e,n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(r=0;r<t.length;r++)o=t[r],n.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(c[o]=e[o])}return c}var s=r.createContext({}),d=function(e){return function(n){var o=u(n.components);return r.createElement(e,t({},n,{components:o}))}},u=function(e){var n=r.useContext(s),o=n;return e&&(o="function"==typeof e?e(n):a(a({},n),e)),o},f=function(e){var n=u(e.components);return r.createElement(s.Provider,{value:n},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},b=r.forwardRef((function(e,n){var o=e.components,c=e.mdxType,t=e.originalType,l=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),d=u(o),f=c,p=d["".concat(l,".").concat(f)]||d[f]||m[f]||t;return o?r.createElement(p,a(a({ref:n},s),{},{components:o})):r.createElement(p,a({ref:n},s))}));function h(e,n){var o=arguments,c=n&&n.mdxType;if("string"==typeof e||c){var t=o.length,l=new Array(t);l[0]=b;var a={};for(var i in n)hasOwnProperty.call(n,i)&&(a[i]=n[i]);a.originalType=e,a[p]="string"==typeof e?e:c,l[1]=a;for(var s=2;s<t;s++)l[s]=o[s];return r.createElement.apply(null,l)}return r.createElement.apply(null,o)}b.displayName="MDXCreateElement"}}]);