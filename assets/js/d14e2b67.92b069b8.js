"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3418],{1999:(t,e,r)=>{r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>c,toc:()=>u});var n=r(74848),a=r(15680),i=r(28774);const s={},o="EnsuredArtifact",c={id:"api/bxl/EnsuredArtifact",title:"EnsuredArtifact",description:"An artifact that will be materialized to buck-out at the end of the bxl invocation. These artifacts can be printed to bxl's results. Doing so will print the path of the artifact rather than the standard representation.",source:"@site/../docs/api/bxl/EnsuredArtifact.md",sourceDirName:"api/bxl",slug:"/api/bxl/EnsuredArtifact",permalink:"/docs/api/bxl/EnsuredArtifact",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"apiSidebar",previous:{title:"CqueryContext",permalink:"/docs/api/bxl/CqueryContext"},next:{title:"Error",permalink:"/docs/api/bxl/Error"}},l={},u=[{value:"EnsuredArtifact.abs_path",id:"ensuredartifactabs_path",level:2},{value:"EnsuredArtifact.rel_path",id:"ensuredartifactrel_path",level:2}];function p(t){const e={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",pre:"pre",...(0,a.useMDXComponents)(),...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.header,{children:(0,n.jsx)(e.h1,{id:"ensuredartifact",children:"EnsuredArtifact"})}),"\n",(0,n.jsx)(e.p,{children:"An artifact that will be materialized to buck-out at the end of the bxl invocation. These artifacts can be printed to bxl's results. Doing so will print the path of the artifact rather than the standard representation."}),"\n",(0,n.jsx)(e.p,{children:"Ensured artifacts are serializable and hashable."}),"\n",(0,n.jsx)(e.h2,{id:"ensuredartifactabs_path",children:"EnsuredArtifact.abs_path"}),"\n",(0,n.jsx)("pre",{class:"language-python",children:(0,n.jsxs)("code",{children:["def EnsuredArtifact.abs_path(\n) -> ",(0,n.jsx)(i.default,{to:"/docs/api/bxl/EnsuredArtifact",children:"bxl.EnsuredArtifact"})]})}),"\n",(0,n.jsxs)(e.p,{children:["Converts this artifact to be printed by its absolute path. Note that this will only print out the absolute path via ",(0,n.jsx)(e.code,{children:"ctx.output.print()"}),". Starlark's ",(0,n.jsx)(e.code,{children:"print()"})," will print out the display info for an ensured artifact."]}),"\n",(0,n.jsx)(e.p,{children:"Sample usage:"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-text",children:'def _impl_abs_path(ctx):\n    actions = ctx.bxl_actions().actions\n    output = actions.write("my_output", "my_content")\n    ensured = ctx.output.ensure(output) # currently defaults to creating an EnsuredArtifact with a relative path\n\n    ensured_with_abs_path = ensured.abs_path() # create a new EnsuredArtifact with absolute path to reuse\n    print(ensured_with_abs_path) # should return something like <ensured artifact ... >\n    ctx.output.print(ensured_with_abs_path) # should return the absolute path of the artifact\n'})}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h2,{id:"ensuredartifactrel_path",children:"EnsuredArtifact.rel_path"}),"\n",(0,n.jsx)("pre",{class:"language-python",children:(0,n.jsxs)("code",{children:["def EnsuredArtifact.rel_path(\n) -> ",(0,n.jsx)(i.default,{to:"/docs/api/bxl/EnsuredArtifact",children:"bxl.EnsuredArtifact"})]})}),"\n",(0,n.jsxs)(e.p,{children:["Converts this artifact to be printed by its path relative to the project root. Note that this will only print out the relative path via ",(0,n.jsx)(e.code,{children:"ctx.output.print()"}),". Starlark's ",(0,n.jsx)(e.code,{children:"print()"})," will print out the display info for an ensured artifact."]}),"\n",(0,n.jsx)(e.p,{children:"Sample usage:"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-text",children:'def _impl_rel_path(ctx):\n    actions = ctx.bxl_actions().actions\n    output = actions.write("my_output", "my_content")\n    ensured = ctx.output.ensure(output) # currently defaults to creating an EnsuredArtifact with a relative path\n\n    ensured_with_rel_path = ensured.rel_path() # create a new EnsuredArtifact with relative path to reuse\n    print(ensured_with_rel_path) # should return something like <ensured artifact ... >\n    ctx.output.print(ensured_with_rel_path) # should return the relative path of the artifact\n'})})]})}function d(t={}){const{wrapper:e}={...(0,a.useMDXComponents)(),...t.components};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(p,{...t})}):p(t)}},15680:(t,e,r)=>{r.r(e),r.d(e,{MDXContext:()=>l,MDXProvider:()=>d,mdx:()=>x,useMDXComponents:()=>p,withMDXComponents:()=>u});var n=r(96540);function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i.apply(this,arguments)}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r,n,a={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(a[r]=t[r]);return a}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}var l=n.createContext({}),u=function(t){return function(e){var r=p(e.components);return n.createElement(t,i({},e,{components:r}))}},p=function(t){var e=n.useContext(l),r=e;return t&&(r="function"==typeof t?t(e):o(o({},e),t)),r},d=function(t){var e=p(t.components);return n.createElement(l.Provider,{value:e},t.children)},h="mdxType",f={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},b=n.forwardRef((function(t,e){var r=t.components,a=t.mdxType,i=t.originalType,s=t.parentName,l=c(t,["components","mdxType","originalType","parentName"]),u=p(r),d=a,h=u["".concat(s,".").concat(d)]||u[d]||f[d]||i;return r?n.createElement(h,o(o({ref:e},l),{},{components:r})):n.createElement(h,o({ref:e},l))}));function x(t,e){var r=arguments,a=e&&e.mdxType;if("string"==typeof t||a){var i=r.length,s=new Array(i);s[0]=b;var o={};for(var c in e)hasOwnProperty.call(e,c)&&(o[c]=e[c]);o.originalType=t,o[h]="string"==typeof t?t:a,s[1]=o;for(var l=2;l<i;l++)s[l]=r[l];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}b.displayName="MDXCreateElement"}}]);