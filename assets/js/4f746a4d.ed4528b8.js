"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1951],{12998:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>i,contentTitle:()=>a,default:()=>p,frontMatter:()=>c,metadata:()=>l,toc:()=>u});var o=n(74848),t=n(15680),s=n(28774);const c={},a="LocalResourceInfo",l={id:"api/build/LocalResourceInfo",title:"LocalResourceInfo",description:"LocalResourceInfo.resource\\env\\vars",source:"@site/../docs/api/build/LocalResourceInfo.md",sourceDirName:"api/build",slug:"/api/build/LocalResourceInfo",permalink:"/docs/api/build/LocalResourceInfo",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"apiSidebar",previous:{title:"Label",permalink:"/docs/api/build/Label"},next:{title:"OutputArtifact",permalink:"/docs/api/build/OutputArtifact"}},i={},u=[{value:"LocalResourceInfo.resource_env_vars",id:"localresourceinforesource_env_vars",level:2},{value:"LocalResourceInfo.setup",id:"localresourceinfosetup",level:2},{value:"LocalResourceInfo.setup_timeout_seconds",id:"localresourceinfosetup_timeout_seconds",level:2}];function d(e){const r={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",pre:"pre",...(0,t.useMDXComponents)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"localresourceinfo",children:"LocalResourceInfo"})}),"\n",(0,o.jsx)(r.h2,{id:"localresourceinforesource_env_vars",children:"LocalResourceInfo.resource_env_vars"}),"\n",(0,o.jsx)("pre",{class:"language-python",children:(0,o.jsxs)("code",{children:["LocalResourceInfo.resource_env_vars: dict[",(0,o.jsx)(s.default,{to:"/docs/api/starlark/str",children:"str"}),", ",(0,o.jsx)(s.default,{to:"/docs/api/starlark/str",children:"str"}),"]"]})}),"\n",(0,o.jsx)(r.p,{children:"Mapping from environment variable (appended to an execution command which is dependent on this local resource) to keys in setup command JSON output."}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"localresourceinfosetup",children:"LocalResourceInfo.setup"}),"\n",(0,o.jsx)("pre",{class:"language-python",children:(0,o.jsxs)("code",{children:["LocalResourceInfo.setup: ",(0,o.jsx)(s.default,{to:"/docs/api/build/cmd_args",children:"cmd_args"})]})}),"\n",(0,o.jsx)(r.p,{children:"Command to run to initialize a local resource."}),"\n",(0,o.jsx)(r.p,{children:"Running this command writes a JSON to stdout.\nThis JSON represents a pool of local resources which are ready to be used.\nExample JSON would be:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-text",children:'{\n  "pid": 42,\n  "resources": [\n    {"socket_address": "foo:1"},\n    {"socket_address": "bar:2"}\n  ]\n}\n'})}),"\n",(0,o.jsxs)(r.p,{children:["Where ",(0,o.jsx)(r.code,{children:'"pid"'})," maps to a PID of a process which should be sent SIGTERM to release the pool of resources\nwhen they are no longer needed. ",(0,o.jsx)(r.code,{children:'"resources"'})," maps to the pool of resources.\nWhen a local resource from this particular pool is needed for an execution command, single entity\nwill be reserved from the pool, for example ",(0,o.jsx)(r.code,{children:'{"socket_address": "bar:2"}'})," and environment variable with\nname resolved using mapping in ",(0,o.jsx)(r.code,{children:"resource_env_vars"})," field and ",(0,o.jsx)(r.code,{children:'"socket_address"'})," key will be added to\nexecution command."]}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"localresourceinfosetup_timeout_seconds",children:"LocalResourceInfo.setup_timeout_seconds"}),"\n",(0,o.jsx)("pre",{class:"language-python",children:(0,o.jsxs)("code",{children:["LocalResourceInfo.setup_timeout_seconds: None | ",(0,o.jsx)(s.default,{to:"/docs/api/starlark/float",children:"float"})," | ",(0,o.jsx)(s.default,{to:"/docs/api/starlark/int",children:"int"})]})}),"\n",(0,o.jsxs)(r.p,{children:["Timeout in seconds for ",(0,o.jsx)(r.code,{children:"setup"})," command."]})]})}function p(e={}){const{wrapper:r}={...(0,t.useMDXComponents)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},15680:(e,r,n)=>{n.r(r),n.d(r,{MDXContext:()=>i,MDXProvider:()=>p,mdx:()=>v,useMDXComponents:()=>d,withMDXComponents:()=>u});var o=n(96540);function t(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function s(){return s=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s.apply(this,arguments)}function c(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?c(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function l(e,r){if(null==e)return{};var n,o,t=function(e,r){if(null==e)return{};var n,o,t={},s=Object.keys(e);for(o=0;o<s.length;o++)n=s[o],r.indexOf(n)>=0||(t[n]=e[n]);return t}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var i=o.createContext({}),u=function(e){return function(r){var n=d(r.components);return o.createElement(e,s({},r,{components:n}))}},d=function(e){var r=o.useContext(i),n=r;return e&&(n="function"==typeof e?e(r):a(a({},r),e)),n},p=function(e){var r=d(e.components);return o.createElement(i.Provider,{value:r},e.children)},f="mdxType",h={inlineCode:"code",wrapper:function(e){var r=e.children;return o.createElement(o.Fragment,{},r)}},m=o.forwardRef((function(e,r){var n=e.components,t=e.mdxType,s=e.originalType,c=e.parentName,i=l(e,["components","mdxType","originalType","parentName"]),u=d(n),p=t,f=u["".concat(c,".").concat(p)]||u[p]||h[p]||s;return n?o.createElement(f,a(a({ref:r},i),{},{components:n})):o.createElement(f,a({ref:r},i))}));function v(e,r){var n=arguments,t=r&&r.mdxType;if("string"==typeof e||t){var s=n.length,c=new Array(s);c[0]=m;var a={};for(var l in r)hasOwnProperty.call(r,l)&&(a[l]=r[l]);a.originalType=e,a[f]="string"==typeof e?e:t,c[1]=a;for(var i=2;i<s;i++)c[i]=n[i];return o.createElement.apply(null,c)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);