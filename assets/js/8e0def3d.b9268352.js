"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5578],{95465:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>d});var r=t(74848),o=t(15680),i=t(52112);const l={id:"getting_started",title:"Getting Started"},c=void 0,s={id:"about/getting_started",title:"Getting Started",description:"Installing Buck2",source:"@site/../docs/about/getting_started.md",sourceDirName:"about",slug:"/about/getting_started",permalink:"/docs/about/getting_started",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"getting_started",title:"Getting Started"},sidebar:"main",previous:{title:"Why Buck2",permalink:"/docs/about/why"},next:{title:"Benefits When Compared to Buck1",permalink:"/docs/about/benefits/compared_to_buck1"}},a={},d=[{value:"Installing Buck2",id:"installing-buck2",level:2},{value:"Windows configuration",id:"windows-configuration",level:3},{value:"Compiling your first project",id:"compiling-your-first-project",level:2},{value:"Creating your first hello_world project",id:"creating-your-first-hello_world-project",level:2},{value:"Learning More",id:"learning-more",level:2},{value:"Communication channels",id:"communication-channels",level:2}];function h(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.useMDXComponents)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"installing-buck2",children:"Installing Buck2"}),"\n",(0,r.jsxs)(n.p,{children:["The latest set of ",(0,r.jsx)(n.code,{children:"buck2"})," executables can be found under the\n",(0,r.jsxs)(n.a,{href:"https://github.com/facebook/buck2/releases/tag/latest",children:[(0,r.jsx)(n.code,{children:"latest"})," release page"]}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Additionally, for each bi-monthly release there is a\n",(0,r.jsx)(n.a,{href:"https://dotslash-cli.com/",children:"dotslash"})," file that is appropriate for checkin to a\nrepository. This will automatically fetch the correct version and architecture\nfor each user, and ensures a consistent build environment for each commit in the\nrepo."]}),"\n",(0,r.jsxs)(n.p,{children:["To get started, first install ",(0,r.jsx)(n.a,{href:"https://rustup.rs/",children:"rustup"}),", then compile the\n",(0,r.jsx)(n.code,{children:"buck2"})," executable:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"rustup install nightly-2024-07-21\ncargo +nightly-2024-07-21 install --git https://github.com/facebook/buck2.git buck2\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The above commands install ",(0,r.jsx)(n.code,{children:"buck2"})," into a suitable directory, such as\n",(0,r.jsx)(n.code,{children:"$HOME/.cargo/bin"}),", which you should then add to your ",(0,r.jsx)(n.code,{children:"$PATH"}),":"]}),"\n",(0,r.jsx)(n.p,{children:"Linux / macOS"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"export PATH=$HOME/.cargo/bin:$PATH\n"})}),"\n",(0,r.jsx)(n.p,{children:"Windows Powershell"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:'$Env:PATH += ";$HOME\\.cargo\\bin"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["With Buck2 installed, you can build projects with ",(0,r.jsx)(n.code,{children:"buck2"}),"!"]}),"\n",(0,r.jsx)(n.h3,{id:"windows-configuration",children:"Windows configuration"}),"\n",(0,r.jsxs)(n.p,{children:["Some of our rules use symlinks, which are disabled by default for non-admin\nWindows users. You can fix that by\n",(0,r.jsx)(n.a,{href:"https://pureinfotech.com/enable-developer-mode-windows-11/",children:"enabling Developer Mode"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"compiling-your-first-project",children:"Compiling your first project"}),"\n",(0,r.jsxs)(n.p,{children:["This section covers the building of a\n",(0,r.jsx)(n.a,{href:"https://github.com/facebook/buck2/tree/main/examples/hello_world",children:"'hello_world' example project"}),"\nthat contains a simple C++ binary. If you are interested in seeing how other\nlanguages can be built, take a look at the\n",(0,r.jsx)(n.a,{href:"https://github.com/facebook/buck2/tree/main/examples/with_prelude",children:"prelude example project"}),",\nwhich contains Rust, C++, Python, and OCaml targets."]}),"\n",(0,r.jsx)(n.p,{children:"First, clone the buck2 repository and cd into the 'hello_world' project:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/facebook/buck2.git\ncd buck2/examples/hello_world\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"buck2 init --git"})," is all the setup you need to start building. This will use\ngit submodule to pull ",(0,r.jsx)(n.a,{href:"https://github.com/facebook/buck2-prelude",children:"buck2-prelude"}),"\ninto your project:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"buck2 init --git\n"})}),"\n",(0,r.jsxs)(n.p,{children:["To use another version control system, run ",(0,r.jsx)(n.code,{children:"buck2 init"})," and manually download\n",(0,r.jsx)(n.a,{href:"https://github.com/facebook/buck2-prelude",children:"buck2-prelude"})," into ",(0,r.jsx)(n.code,{children:"prelude"})," at\nroot."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"buck2 init\n"})}),"\n",(0,r.jsx)(n.p,{children:"To build the entire project, run:"}),"\n",(0,r.jsxs)(n.p,{children:["Note: ",(0,r.jsx)(n.em,{children:"Requires clang and lld to be in the path"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"buck2 build //...\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Note that this uses a\n",(0,r.jsx)(n.a,{href:"https://github.com/facebook/buck2/blob/main/prelude/toolchains/cxx.bzl",children:"simple C++ toolchain"}),"\nthat requires a recent version of ",(0,r.jsx)(n.code,{children:"clang"})," to be installed on your system. This\ncan be installed with any package manager (ex. ",(0,r.jsx)(n.code,{children:"apt install clang"}),",\n",(0,r.jsx)(n.code,{children:"xcode-select --install"})," on macOS, ",(0,r.jsx)(n.code,{children:"choco install llvm"}),"). After installing any\nexternal tools or changing your ",(0,r.jsx)(n.code,{children:"PATH"}),", run ",(0,r.jsx)(n.code,{children:"buck2 kill"})," before running a build."]}),"\n",(0,r.jsx)(n.p,{children:"To list all targets available in the project, run:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"buck2 targets //...\n"})}),"\n",(0,r.jsx)(n.p,{children:"To run the main C++ binary, run:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"buck2 run //:main\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The newly built binary can be found with the ",(0,r.jsx)(n.code,{children:"--show-output"})," flag:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"buck2 build //:main --show-output\n"})}),"\n",(0,r.jsx)(n.p,{children:"Output:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"Build ID: 0e890477-5b7f-4829-9ffe-662e572320a0\nJobs completed: 3. Time elapsed: 0.0s.\nBUILD SUCCEEDED\nroot//:main buck-out/v2/gen/root/9f4d83578bb24895/__main__/main\n"})}),"\n",(0,r.jsx)(n.h2,{id:"creating-your-first-hello_world-project",children:"Creating your first hello_world project"}),"\n",(0,r.jsx)(n.p,{children:"This section demonstrates how to create a simple C++ 'hello_world' project."}),"\n",(0,r.jsx)(n.p,{children:"To get started, make a new folder for your project and cd into it."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"mkdir hello_world\ncd hello_world\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Next, run ",(0,r.jsx)(n.code,{children:"buck2 init --git"})," to initialize the project. This command will set up\nyour project with ",(0,r.jsx)(n.code,{children:"git"})," and pull in\n",(0,r.jsx)(n.a,{href:"https://github.com/facebook/buck2-prelude",children:"buck2-prelude"})," as a submodule.\nAdditionally, it will generate multiple files with default values."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"buck2 init --git\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Next, add the source code ",(0,r.jsx)(n.code,{children:"main.cpp"})," ,"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c++",children:'#include <iostream>\nint main() {\n    std::cout << "Hello from a C++ Buck2 program!" << std::endl;\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Then, define a ",(0,r.jsx)(n.code,{children:"cxx_binary"})," in the root ",(0,r.jsx)(n.code,{children:"BUCK"})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Python",children:'# BUCK\ncxx_binary(\n    name = "main",\n    srcs = ["main.cpp"],\n    link_style = "static",\n)\n'})}),"\n",(0,r.jsxs)(n.p,{children:["If you try to build ",(0,r.jsx)(n.code,{children:"//:main"})," at this point, you'll see an error about ",(0,r.jsx)(n.code,{children:"buck2"}),"\nnot being able to find ",(0,r.jsx)(n.code,{children:"toolchains//:cxx"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["The final step is to define the necessary toolchain targets. For that project,\nyou need ",(0,r.jsx)(n.code,{children:"system_cxx_toolchain"})," and ",(0,r.jsx)(n.code,{children:"system_python_bootstrap_toolchain"}),", which\nwill pick up the necessary tools (clang++, python, and so on) from the system."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Python",children:'# toolchains/BUCK\nload("@prelude//toolchains:cxx.bzl", "system_cxx_toolchain")\nload("@prelude//toolchains:python.bzl", "system_python_bootstrap_toolchain")\n\nsystem_cxx_toolchain(\n    name = "cxx",\n    visibility = ["PUBLIC"],\n)\n\nsystem_python_bootstrap_toolchain(\n    name = "python_bootstrap",\n    visibility = ["PUBLIC"],\n)\n'})}),"\n",(0,r.jsx)(n.p,{children:"At this point, your project should have the following files:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'$ tree -a -I "buck-out|prelude|.git"\n|-- .buckconfig\n|-- .gitmodules\n|-- BUCK\n|-- main.cpp\n`-- toolchains\n    `-- BUCK\n'})}),"\n",(0,r.jsx)(n.p,{children:"Now, you're ready to see the build in action."}),"\n",(0,r.jsx)(n.p,{children:"To build the main C++ target, run:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"buck2 build //:main\n"})}),"\n",(0,r.jsx)(n.p,{children:"To run the main C++ target, run:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"buck2 run //:main\n"})}),"\n",(0,r.jsxs)(n.p,{children:["In summary, a ",(0,r.jsx)(n.code,{children:"buck2"})," project requires:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["A ",(0,r.jsx)(n.code,{children:".buckconfig"})," file in the root which has a ",(0,r.jsx)(n.code,{children:"[cells]"})," section listing out\n",(0,r.jsx)(n.a,{href:"https://buck2.build/docs/concepts/glossary/#cell",children:"cells"})]}),"\n",(0,r.jsxs)(n.li,{children:["A ",(0,r.jsx)(n.code,{children:"prelude"})," directory, which contains a collection of\n",(0,r.jsx)(n.a,{href:"https://buck2.build/docs/concepts/glossary/#rule",children:"rules"})," of your choice.\n",(0,r.jsx)(n.code,{children:"buck2 init"})," will pull in the\n",(0,r.jsx)(n.a,{href:"https://github.com/facebook/buck2-prelude.git",children:"buck2-prelude"})," as a git\nsubmodule by default"]}),"\n",(0,r.jsxs)(n.li,{children:["If using the ",(0,r.jsx)(n.a,{href:"https://github.com/facebook/buck2-prelude.git",children:"buck2-prelude"}),",\na ",(0,r.jsx)(n.code,{children:"toolchains"})," directory that declares relevant toolchains. We provide some\nbasic toolchains in\n",(0,r.jsx)(n.a,{href:"https://github.com/facebook/buck2/tree/main/prelude/toolchains",children:"prelude/toolchains"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BUCK"})," files that specify targets for your project"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"buck2 init --git"})," will generate all of these with reasonable default values."]}),"\n",(0,r.jsx)(n.h2,{id:"learning-more",children:"Learning More"}),"\n",(0,r.jsxs)(n.p,{children:["You should now be ready to explore Buck2 for use in your own projects. You can\nexplore the ",(0,r.jsx)(n.a,{href:"https://github.com/facebook/buck2/tree/main/examples",children:"examples"}),"\nfolder. Look out for more tutorials in the future."]}),"\n",(0,r.jsxs)(i.FbInternalOnly,{children:[(0,r.jsx)(n.h2,{id:"communication-channels",children:"Communication channels"}),(0,r.jsx)(n.p,{children:"The following channels provide an insight into Buck2:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://fb.workplace.com/groups/buck2prototyping",children:"Buck2 Engineering"})," -\nWorkplace group for discussions about what features Buck2 should have, how\nit's going, status updates, and much more."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://fb.workplace.com/groups/buck2users",children:"Buck2 Users"})," - Workplace group\nfeaturing questions from users and reports of bugs."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://fb.workplace.com/groups/347532827186692",children:"Buck2 Rule Authors"})," -\nWorkplace group for discussions about language-specific rules."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://www.internalfb.com/intern/monitor/oncall_profile?oncall=buck2",children:"Buck2 Oncall Hub"})," -\nurgent tasks and escalation."]}),"\n"]})]})]})}function u(e={}){const{wrapper:n}={...(0,o.useMDXComponents)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},15680:(e,n,t)=>{t.r(n),t.d(n,{MDXContext:()=>a,MDXProvider:()=>u,mdx:()=>g,useMDXComponents:()=>h,withMDXComponents:()=>d});var r=t(96540);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(){return i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i.apply(this,arguments)}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var a=r.createContext({}),d=function(e){return function(n){var t=h(n.components);return r.createElement(e,i({},n,{components:t}))}},h=function(e){var n=r.useContext(a),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},u=function(e){var n=h(e.components);return r.createElement(a.Provider,{value:n},e.children)},p="mdxType",b={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},x=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,a=s(e,["components","mdxType","originalType","parentName"]),d=h(t),u=o,p=d["".concat(l,".").concat(u)]||d[u]||b[u]||i;return t?r.createElement(p,c(c({ref:n},a),{},{components:t})):r.createElement(p,c({ref:n},a))}));function g(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,l=new Array(i);l[0]=x;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c[p]="string"==typeof e?e:o,l[1]=c;for(var a=2;a<i;a++)l[a]=t[a];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}x.displayName="MDXCreateElement"}}]);